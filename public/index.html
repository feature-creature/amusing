<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Amusing Socket.IO</title>
    <link rel="stylesheet" type="text/css" media="all" href="style.css"></link>
    <script src="/socket.io/socket.io.js"></script>
    <script src="./scripts/jquery.v2.min.js"></script>
    <script src="./scripts/p5.min.js"></script>
    <script src="./scripts/d3.v5.min.js"></script>
  </head>
  <body>
    <section>
    <div class="devour-logo"><a href="/"><img src="devour.svg" alt="Devour logo"></a></div>
    <header><h2 class="with-lines">Create your <span>Champagne</span> sensory map</h2></header>
    <div id="canvas-container">
    </div>
    <!-- not connected -->
    <div id="not-wearing" class="vis-aid">    
        <h3>Hi <span>Name</span></h3>
        <p>Please put the headset on and adjust so
        <br>
        it is tight to your forehead.</p>
    </div>

    <!-- connected -->
    <div id="wearing" class="vis-aid hide">    
        <h3>Hi <span>Name</span></h3>
        <p>We are now connected to your brain data.</p>
        <p>Try to relax and when ready, start the experiment.</p>
        <button id="go">start experiment</button>
        <!-- not you? -->
    </div>

    <!-- recording -->
    <div id="recording" class="vis-aid hide">
        <!-- baseline -->
        <p id="baselining" class="vis-aid hide">Stay Relaxed</p>
        <!-- tasting -->
        <p id="eating" class="vis-aid hide">Now Taste!</p>
        <img class="countdown-background" src="./assets/background.png">
        <div id="countdown">0:30</div>
        <!-- cancel -->
    </div>

    <!-- finished -->
    <div id="finished" class="vis-aid hide">
        <img class="countdown-background" src="./assets/check.png">
    </div>
    
    </section>
    <script>
        // connect to socketio (defaults to localhost server ip:port)
        var socket = io();
        var oscMsg;

        // set headset # from url param, default headset 1 if no headset param exists
        var url = new URL(window.location.href);
        
        // room number
        var roomNum = url.searchParams.get("room");
        roomNum == null ? roomNum = "1" : roomNum = roomNum;
        
        // tablet number
        var tabletNum = url.searchParams.get("tablet");
        tabletNum == null ? tabletNum = "1" : tabletNum = tabletNum;

        // user id
        var userID = url.searchParams.get("userID");
        userID == null ? userID = "121" : userID = userID;


    </script>
    <script src="./scripts/headset.js"></script>
  </body>
</html>
